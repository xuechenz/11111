Subject: Spot Price Anomaly Detection – TD vs. Bloomberg (Scripts Attached)

Hi [Mentor's Name],

I’ve completed both scripts for the spot price discrepancy task and wanted to share them with you for your review.

Script 1 – spot_td_pull.py

Pulls 5 years of daily unadjusted spot prices from TD’s internal database using SQL

Calculates intraday high/low range to identify dates with more than 10% movement

Outputs two files:

spot_5y.csv: full 5-year TD spot price history

intraday_gt10pct.csv: dates with ≥10% intraday movement

Note: Since I don’t have access to the internal database, I wasn’t able to run or test this script, so it may still require debugging.

Script 2 – spot_compare_bbg.py

Uses the dates identified in Script 1

Pulls Bloomberg’s adjusted spot prices for comparison using the xbbg package

Calculates daily returns and labels each flagged event into categories such as:

Missing_Adjustment_Suspect – large move in TD but not in Bloomberg

True_Move – large move in both TD and Bloomberg

DataGap_BBG – missing data on the Bloomberg side

Output: bbg_compare.csv with side-by-side comparison and labels

Design Note:
I structured the process into two standalone scripts to clearly separate anomaly detection from validation. This modular design makes it easier to debug, rerun, or adapt each part independently. For example, the Bloomberg comparison can be re-executed using previously saved TD data, without needing to pull from the internal database again.

Please let me know if you’d like to review the logic together, or if there’s anything you’d like me to adjust.

Best regards,
Annie


